<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>PlanÃ¨tes Helldivers 2</title>
  <style>
    body {
      background: #0b0f17;
      color: #ffffff;
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    h1 {
      text-align: center;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: #131a26;
    }

    th, td {
      padding: 10px;
      border-bottom: 1px solid #2c3a52;
    }

    th {
      background: #1d2636;
    }

    tr:hover {
      background: #1e2a40;
    }

    .loading {
      text-align: center;
      font-size: 20px;
      opacity: 0.8;
    }
  </style>
</head>

<body>

<h1>ðŸŒŒ PlanÃ¨tes de Helldivers 2</h1>
<div id="status" class="loading">Chargement des donnÃ©es...</div>

<table id="planetTable" style="display:none;">
  <thead>
    <tr>
      <th>Nom</th>
      <th>Secteur</th>
      <th>Occupation</th>
    </tr>
  </thead>
  <tbody id="planetBody"></tbody>
</table>

<script>
const API_URL = "https://api.helldivers2.dev/api/planets?include[0]=sector";

// Factions prÃ©sentes dans la guerre
const FACTIONS = {
  1: "Super Earth ðŸŸ¦",
  2: "Terminids ðŸŸ¨",
  3: "Automates ðŸ”´"
};

async function loadPlanets() {
  const status = document.getElementById("status");
  const table = document.getElementById("planetTable");
  const body = document.getElementById("planetBody");

  try {
    const resp = await fetch(API_URL);
    const json = await resp.json();

    // VÃ©rification
    if (!json.data || json.data.length === 0) {
      status.textContent = "Aucune planÃ¨te trouvÃ©e.";
      return;
    }

    const planets = json.data;

    status.style.display = "none";
    table.style.display = "table";

    planets.forEach(p => {
      const row = document.createElement("tr");

      const name = p.name || "Inconnu";
      const sector = p.sector?.name || "Inconnu";
      const owner = FACTIONS[p.ownerId] || "Inconnu";

      row.innerHTML = `
        <td>${name}</td>
        <td>${sector}</td>
        <td>${owner}</td>
      `;

      body.appendChild(row);
    });

  } catch (err) {
    status.textContent = "Erreur lors du chargement.";
    console.error(err);
  }
}

loadPlanets();
</script>

</body>
</html>
